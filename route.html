<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ì„±ì£¼ì ìˆœí™˜ë²„ìŠ¤ ë…¸ì„ </title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f6f8fa;
      margin: 0;
      padding: 0;
      color: #222;
    }
    header {
      background-color: #2563eb;
      color: white;
      padding: 15px;
      text-align: center;
      font-size: 1.2rem;
      font-weight: bold;
    }
    main {
      padding: 20px;
      max-width: 800px;
      margin: auto;
    }
    h2 {
      color: #2563eb;
      margin-top: 10px;
    }
    ul {
      list-style: none;
      padding-left: 0;
    }
    li {
      background: white;
      margin: 4px 0;
      padding: 8px 12px;
      border-radius: 6px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    footer {
      margin-top: 40px;
      text-align: center;
      color: #555;
      font-size: 0.9rem;
      padding-bottom: 20px;
    }
  </style>
</head>
<body>
  <header id="route-title">ì„±ì£¼ì ìˆœí™˜ë²„ìŠ¤</header>
  <main>
    <h2 id="route-name"></h2>
    <p><strong>ğŸ•’ ìš´í–‰ ê°„ê²©:</strong> <span id="interval"></span></p>
    <p><strong>ğŸ“… í‰ì¼ ì‹œê°„í‘œ:</strong> <span id="weekday"></span></p>
    <p><strong>ğŸ“… ì£¼ë§ ì‹œê°„í‘œ:</strong> <span id="weekend"></span></p>
    <p><strong>â„¹ï¸ ë¹„ê³ :</strong> <span id="notes"></span></p>
    <h3>ğŸšŒ ì •ë¥˜ì¥ ëª©ë¡</h3>
    <ul id="stops"></ul>
  </main>
  <footer>Â© ì„±ì£¼ì ìˆœí™˜ë²„ìŠ¤ ë‹¤êµ­ì–´ ì„œë¹„ìŠ¤</footer>

  <script>
    async function loadRoute() {
      const params = new URLSearchParams(window.location.search);
      const routeId = params.get("route") || "1";
      const lang = params.get("lang") || localStorage.getItem("selectedLang") || "ko";

      try {
        // í•­ìƒ ìµœì‹  ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
        const res = await fetch("routes.json?v=" + Date.now());
        const json = await res.json();
        const route = json.routes.find(r => r.id === routeId);
        if (!route) throw new Error("í•´ë‹¹ ë…¸ì„ ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");

        // ì œëª©ê³¼ ìƒë‹¨ í—¤ë”ì— ì˜¬ë°”ë¥¸ ë…¸ì„ ëª… í‘œì‹œ
        const titleText = route.title[lang] || route.title.ko;
        document.getElementById("route-title").textContent = titleText;
        document.getElementById("route-name").textContent = titleText;

        // ì„¸ë¶€ ì •ë³´ í‘œì‹œ
        document.getElementById("interval").textContent = route.interval;
        document.getElementById("weekday").textContent = route.weekday.join(", ");
        document.getElementById("weekend").textContent = route.weekend.join(", ");
        document.getElementById("notes").textContent = route.notes[lang] || route.notes.ko;

        // ì •ë¥˜ì¥ ëª©ë¡ í‘œì‹œ
        const stops = route.stops[lang] || route.stops.ko;
        document.getElementById("stops").innerHTML =
          stops.map(stop => `<li>${stop}</li>`).join("");
      } catch (err) {
        console.error(err);
        document.body.innerHTML = "<p style='padding:20px;'>ë…¸ì„  ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>";
      }
    }

    loadRoute();
  </script>
</body>
</html>

